const Campground=require("../../models/campground"),express=require("express"),router=express.Router();function escapeRegex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}router.get("/",async(e,r,n)=>{try{let o=null;if(e.query.search){const n=new RegExp(escapeRegex(e.query.search),"gi"),a=await Campground.find({$or:[{name:n},{location:n},{"author.username":n}]});return a.length<1?(o="No matching locations, campground names or users found. Try again!",r.render("campgrounds/index",{campgrounds:a,noMatch:o})):r.render("campgrounds/index",{campgrounds:a,noMatch:o})}{const e=await Campground.find({});return r.render("campgrounds/index",{campgrounds:e,noMatch:o})}}catch(e){return e.shouldRedirect=!0,n(e)}}),module.exports=router;